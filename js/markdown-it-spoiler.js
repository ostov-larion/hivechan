!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).markdownItSpoiler=e()}}(function(){return function(){return function e(n,t,o){function r(i,f){if(!t[i]){if(!n[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[i]={exports:{}};n[i][0].call(u.exports,function(e){return r(n[i][1][e]||e)},u,u.exports,e,n,t,o)}return t[i].exports}for(var s="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}}()({1:[function(e,n,t){"use strict";const o=(e,n)=>{const t=[];for(const o of n){if(33!==o.marker)continue;if(-1===o.end)continue;const r=n[o.end],s=e.tokens[o.token];s.type="spoiler_open",s.tag="span",s.attrs=[["class","spoiler"]],s.nesting=1,s.markup="!!",s.content="";const i=e.tokens[r.token];i.type="spoiler_close",i.tag="span",i.nesting=-1,i.markup="!!",i.content="","text"===e.tokens[r.token-1].type&&"!"===e.tokens[r.token-1].content&&t.push(r.token-1)}for(;t.length;){const n=t.pop();let o=n+1;for(;o<e.tokens.length&&"spoiler_close"===e.tokens[o].type;)o++;if(n!==--o){const t=e.tokens[o];e.tokens[o]=e.tokens[n],e.tokens[n]=t}}};n.exports=function(e,n=!1){e.inline.ruler.before("emphasis","spoiler",(e=>(n,t)=>{if(t)return!1;const o=n.pos,r=n.src.charCodeAt(o);if(33!==r)return!1;const s=n.scanDelims(n.pos,!0);let i=s.length;const f=String.fromCharCode(r);if(i<2)return!1;let p=!1;i%2&&(p=!0,e||(n.push("text","",0).content=f),i--);for(let e=0;e<i;e+=2)n.push("text","",0).content=f+f,n.delimiters.push({marker:r,length:0,jump:e,token:n.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return n.pos+=s.length,p&&e&&n.pos--,!0})(n)),e.inline.ruler2.before("emphasis","spoiler",e=>{if(o(e,e.delimiters),e.tokens_meta)for(const n of e.tokens_meta)n&&n.delimiters&&o(e,n.delimiters)})}},{}]},{},[1])(1)});